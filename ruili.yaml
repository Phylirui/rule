port: 8890
socks-port: 8891
redir-port: 8892
mixed-port: 8893
allow-lan: true
ipv6: true
bind-address: "*"
mode: rule
log-level: silent
external-controller: '0.0.0.0:9190'
secret: 960217
experimental:
  sniff-tls-sni: true

routing-mark: 7777

dns:
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  listen: 0.0.0.0:53
  default-nameserver:
    - 192.168.5.1:5553
    - "[fe80::1]:5553"
  fake-ip-range: 198.18.0.1/16 # Fake IP addresses pool CIDR
  fake-ip-filter:
    - '*.lan'
    - '*.localdomain'
    - '*.example'
    - '*.invalid'
    - '*.localhost'
    - '*.test'
    - '*.local'
    - '*.time.edu.cn'
    - '*.ntp.org.cn'
    - '+.pool.ntp.org'
    - 'proxy.golang.org'
    - 'stun.*.*'
    - 'stun.*.*.*'
    - '+.stun.*.*'
    - '+.stun.*.*.*'
    - '+.stun.*.*.*.*'
    - '19960217.cn'
    - '*.wrt.19960217.cn'
    - '192.168.5.*'
  nameserver:
    - 192.168.5.1:5553
    - "[fe80::1]:5553"
    - https://dns.alidns.com/dns-query    
    - dhcp://ove_eth0
  fallback:
    - 192.168.5.1:5553
    - "[fe80::1]:5553"  
    - https://dns.alidns.com/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'

tun:
  enable: true
  stack: system
  dns-hijack:
    - any:53
  auto-route: true 
  auto-detect-interface: false
auto-redir:
  enable: true
  auto-route: true
   
proxy-providers:
  west:
    type: http
    url: https://url.v1.mk/sub?target=clash&url=https%3A%2F%2Fww5271.xyz%2Frss%2Fcv1%2FleRoNf4%2FEGqE7j&insert=false&config=https%3A%2F%2Fraw.githubusercontent.com%2FACL4SSR%2FACL4SSR%2Fmaster%2FClash%2Fconfig%2FACL4SSR_Online_Full_NoAuto.ini&exclude=.*.%20%E5%95%86%E5%8A%A1%7C%E6%B8%B8%E6%88%8F%C2%B7.*%7C.*IEPL%C2%B7%E7%BE%8E%E5%9B%BDUS%C2%B7.*%7C%E5%89%A9%E4%BD%99.*%7C%E5%AE%98%E7%BD%91.*%7C----------------------------&filename=west.yaml&interval=172800&emoji=false&list=true&xudp=false&udp=false&tfo=false&expand=false&scv=true&fdn=false&new_name=true
    interval: 86400
    path: ./providers/WestWorldVPN.yaml 
    health-check:
      enable: true
      interval: 300
      url: http://www.gstatic.com/generate_204
      
  cokeCloud:
    type: http
    url: https://url.v1.mk/sub?target=clash&url=https%3A%2F%2Fcola0720.xn--3iq226gfdb94q.com%2Fapi%2Fv1%2Fclient%2Fsubscribe%3Ftoken%3De3d3e2ba4bc3bdb5ff4e64a4173ebb7b&insert=false&config=https%3A%2F%2Fraw.githubusercontent.com%2FACL4SSR%2FACL4SSR%2Fmaster%2FClash%2Fconfig%2FACL4SSR_Online_Full_NoAuto.ini&exclude=%E8%B7%9D%E7%A6%BB%E4%B8%8B%E6%AC%A1%E9%87%8D%E7%BD%AE%E5%89%A9%E4%BD%99%EF%BC%9A*%7C%E5%A5%97%E9%A4%90%E5%88%B0%E6%9C%9F%EF%BC%9A*%7C%E5%AF%BC%E8%88%AA%E9%A1%B5%EF%BC%9A*&filename=cokeCloud.yaml&interval=172800&emoji=false&list=true&xudp=false&udp=false&tfo=false&expand=true&scv=false&fdn=false&new_name=true
    interval: 86400
    path: ./providers/cokeCloud.yaml 
    health-check:
      enable: true
      interval: 300
      url: http://www.gstatic.com/generate_204

proxy-groups:
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png
    use:
      - cokeCloud
      - west
    proxies: 
      - AUTO
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置
    name: PROXY
    type: select  
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Urltest.png
    use:
      - cokeCloud
      - west
    include-all: true
    exclude-filter: "剩余流量"
    filter: (?i)香港|Hong Kong|HK|港|(?i)新加坡|Singapore|(?i)日本|Japan|(?i)美国|USA|台湾|韩国
    name: AUTO
    type: url-test
    interval: 300  
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
    use:
      - cokeCloud
      - west
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置
    filter: (?i)香港|Hong Kong|HK|港
    name: HK AUTO
    type: url-test
    interval: 300
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
    use:
      - cokeCloud
      - west  
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置
    filter: (?i)新加坡|Singapore
    name: SG AUTO
    type: url-test
    interval: 300
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
    use:
      - cokeCloud
      - west
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置
    filter: (?i)日本|Japan
    name: JP AUTO
    type: url-test
    interval: 300
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
    use:
      - cokeCloud
      - west
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置
    filter: (?i)美国|USA
    name: US AUTO
    type: url-test
    interval: 300       
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png
    use:
      - cokeCloud
      - west
    name: AIGC
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置
    filter: (?i)美国|USA|(?i)日本|Japan|(?i)香港|Hong Kong|HK|港|(?i)新加坡|Singapore
    type: url-test
    interval: 300 

rule-providers:
  directport:
    type: http
    url: https://19960217.cn:5344/d/DS918/volume2/docker/share/rule/directport.yaml?sign=U5mZuDE_Riv-wGtUw9TdHUQPbndXtxULVQpX3VWaQHo=:0
    behavior: classical
    path: ./ruleset/directport.yaml
  applications:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt
    path: ./ruleset/applications.yaml
    interval: 86400
  private:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.yaml
    path: ./ruleset/private.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  cncidr:
    type: http
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt
    path: ./ruleset/cncidr.yaml
    interval: 86400
  lancidr:
    type: http
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
    path: ./ruleset/lancidr.yaml
    interval: 86400
  telegram_domain:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.yaml
    path: ./ruleset/telegram_domain.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  google_domain:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.yaml
    path: ./ruleset/google_domain.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  geolocation-!cn:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.yaml
    path: ./ruleset/geolocation-!cn.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  proxy:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
    path: ./ruleset/proxy.yaml
    interval: 86400
  direct:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
    path: ./ruleset/direct.yaml
    interval: 86400
  SPdirect:
    url: https://19960217.cn:5344/d/DS918/volume2/docker/share/rule/SPdirect.yaml?sign=77pBWVftLbQdy3RGMEQ5f5XMmFlpSpfKWzC7eANNY9M=:0
    type: http
    behavior: classical
    path: ./ruleset/SPdirect.yaml   
  JPauto:
    url: https://github.19960217.cn/https://raw.githubusercontent.com/Phylirui/rule/refs/heads/main/JPAUTO.yaml
    type: http
    behavior: classical
    path: ./ruleset/JPAUTO.yaml  
  HKauto:
    url: https://github.19960217.cn/https://raw.githubusercontent.com/Phylirui/rule/refs/heads/main/HKAUTO.yaml
    type: http
    behavior: classical
    path: ./ruleset/HKAUTO.yaml  
  bing:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.yaml
    path: ./ruleset/bing.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  copilot:
    path: ./ruleset/copilot.yaml
    behavior: classical
    format: yaml
    type: http
  claude:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
    path: ./ruleset/claude.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  bard:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BardAI/BardAI.yaml
    path: ./ruleset/bard.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  openai:
    path: ./ruleset/openai.yaml
    behavior: classical
    format: yaml
    type: http
  steam:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml
    path: ./ruleset/steam.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
    
rules:
#domain	special
    - RULE-SET,SPdirect,DIRECT
    - RULE-SET,HKauto,HK AUTO
    - RULE-SET,JPauto,JP AUTO
#country
    - GEOIP,LAN,DIRECT,no-resolve
    - GEOIP,CN,DIRECT,no-resolve
#RULE-SET
    - RULE-SET,directport,DIRECT
    - RULE-SET,private,DIRECT
    - RULE-SET,lancidr,DIRECT
    - RULE-SET,cncidr,DIRECT
    - RULE-SET,applications,DIRECT
    - RULE-SET,direct,DIRECT  
    - RULE-SET,bing,AIGC
    - RULE-SET,copilot,AIGC
    - RULE-SET,bard,AIGC
    - RULE-SET,openai,AIGC
    - RULE-SET,claude,AIGC  
    - RULE-SET,steam,PROXY
    - RULE-SET,telegram_domain,PROXY
    - RULE-SET,google_domain,PROXY
    - RULE-SET,geolocation-!cn,PROXY
    - RULE-SET,proxy,PROXY
 #others    
    - MATCH,PROXY
    
geo-auto-update: true
geo-update-interval: 72
geodata-mode: true
geox-url:
  geoip: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
  geosite: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb
  asn: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb    
